<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SemÃ¢ntica ConsignaÃ§Ã£o API</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ›ï¸ SemÃ¢ntica ConsignaÃ§Ã£o API</h1>
            <p>AnÃ¡lise semÃ¢ntica para emprÃ©stimos consignados usando Serpro LLM</p>
        </div>

        <!-- EstatÃ­sticas -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalRequests">0</div>
                <div class="stat-label">Total de RequisiÃ§Ãµes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalErrors">0</div>
                <div class="stat-label">Total de Erros</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="errorRate">0%</div>
                <div class="stat-label">Taxa de Erro</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="uptime">0s</div>
                <div class="stat-label">Tempo Ativo</div>
            </div>
        </div>

        <!-- Teste JSON Estruturado -->
        <div class="section">
            <h3>ğŸ”§ Teste de AnÃ¡lise SemÃ¢ntica</h3>
            <p>Envie um JSON estruturado para anÃ¡lise:</p>
            <textarea id="jsonInput" placeholder="Cole aqui o JSON estruturado...">{
  "id_termo": "314166",
  "cpf": "48956314785",
  "pratica_vedada": "10,11",
  "justificativa": "Estou sendo descontado sem autorizaÃ§Ã£o prÃ©via do emprÃ©stimo consignado no valor de R$ 450,00 mensais. Nunca solicitei este emprÃ©stimo e nÃ£o recebi nenhum valor creditado em minha conta."
}</textarea>
            <div class="button-group">
                <button id="jsonBtn" class="btn-primary" onclick="testJson()">ğŸ§ª Analisar JSON</button>
                <button class="btn-secondary" onclick="loadExample()">ğŸ“„ Carregar Exemplo</button>
            </div>
            <div id="jsonResult" class="result"></div>
        </div>

        <!-- Processamento de Arquivo -->
        <div class="section">
            <h3>ğŸ“ Processamento de Arquivo</h3>
            <p>Processe arquivos em lote atravÃ©s do WebSocket:</p>
            <input type="text" id="filename" placeholder="Nome do arquivo (ex: 100.txt)" value="100.txt">
            <button id="processBtn" class="btn-success" onclick="processFile()">ğŸš€ Processar Arquivo</button>
            <div id="fileProgress" class="progress"></div>
        </div>

        <!-- Log em Tempo Real -->
        <div class="section">
            <h3>ğŸ“Š Log em Tempo Real</h3>
            <div id="logArea" class="log-area">[Conectando WebSocket...]\n</div>
            <button class="btn-warning" onclick="clearLog()">ğŸ—‘ï¸ Limpar Log</button>
        </div>

        <!-- Logs do Sistema -->
        <div class="section">
            <h3>ğŸ“‹ Logs do Sistema</h3>
            <p>Visualize os logs recentes da aplicaÃ§Ã£o:</p>
            <button id="loadLogsBtn" class="btn-info" onclick="loadSystemLogs()">ğŸ“¥ Carregar Logs Recentes</button>
            <div id="systemLogs" class="log-area" style="display: none; margin-top: 15px;">
                [Clique em "Carregar Logs Recentes" para visualizar]
            </div>
        </div>

        <!-- Links Ãšteis -->
        <div class="section">
            <h3>ğŸ”— Links Ãšteis</h3>
            <div class="links">
                <a href="/docs" class="btn-info" target="_blank">ğŸ“š Swagger Docs</a>
                <a href="/health" class="btn-info" target="_blank">â¤ï¸ Health Check</a>
                <a href="/stats" class="btn-info" target="_blank">ğŸ“Š EstatÃ­sticas</a>
                <a href="/logs" class="btn-info" target="_blank">ğŸ“‹ Logs API</a>
            </div>
        </div>

        <!-- InformaÃ§Ãµes do Sistema -->
        <div class="section">
            <h3>â„¹ï¸ InformaÃ§Ãµes</h3>
            <p><strong>Formato Aceito:</strong> Apenas JSON estruturado com os campos:</p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><code>id_termo</code>: Identificador do termo</li>
                <li><code>cpf</code>: CPF do cliente (11 dÃ­gitos)</li>
                <li><code>pratica_vedada</code>: CÃ³digo da prÃ¡tica vedada</li>
                <li><code>justificativa</code>: Texto com no mÃ­nimo 10 caracteres</li>
            </ul>
            <br>
            <p><strong>CritÃ©rios Aceitos:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>âœ… ConsignaÃ§Ã£o sem autorizaÃ§Ã£o prÃ©via</li>
                <li>âœ… ConsignaÃ§Ã£o sem crÃ©dito do valor</li>
                <li>âœ… Desconto de contrato jÃ¡ liquidado</li>
            </ul>
            <br>
            <p><strong>CritÃ©rios Rejeitados:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>âŒ RediscussÃ£o de contrato (taxas, etc.)</li>
                <li>âŒ SolicitaÃ§Ã£o de boletos</li>
            </ul>
            <br>
            <p><strong>ClassificaÃ§Ãµes:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>APPROVED:</strong> SIM + confianÃ§a â‰¥ 70%</li>
                <li><strong>REVIEW_REQUIRED:</strong> SIM + confianÃ§a 50-69%</li>
                <li><strong>REJECTED:</strong> NÃƒO ou confianÃ§a < 50%</li>
            </ul>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>